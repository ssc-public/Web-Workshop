## <p dir="rtl" style="position:right;">ูพุงุฏูโุณุงุฒ ูุฑุงูุช GraphQL ุจุง ุงุณุชูุงุฏู ุงุฒ React + Apollo </p>  



<p dir="rtl" style="position:right;">
ุฏุฑ ุงู ูุณูุช ูโุฎูุงูู ุจุฑูุงููโุง ุจุฑุง ุณูุช ฺฉูุงูุช graphQL ูพุงุฏูโุณุงุฒ ฺฉูู ฺฉู ุฏุฑ ุงู ูุณูุช ฺฉุงุฑุจุฑ ูโุชูุงูุฏ query ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุจู ุณูุช ุณุฑูุฑ ุจูุฑุณุชุฏ ู ุฌูุงุจ ููุฑุฏ ุงูุชุธุงุฑ ุฎูุฏุด ุฑุง ุฏุฑุงูุช ฺฉูุฏ.
</p>
 <p dir="rtl" style="position:right;">
ุงู ูพุฑูฺู ุฏุฑ ูุงูุน ูพุงุฏูโุณุงุฒ โุง ุจุฑุง ุณุงุช hackernews ุงุณุช ฺฉู ุดุงูู ุชุนุฏุงุฏ ููฺฉ ุงุณุช ฺฉู ฺฉุงุฑุจุฑุงู ุงู ุณุงุช ูโุชูุงููุฏ ููฺฉ ุฌุฏุฏ ุงุถุงูู ฺฉููุฏ ู ุง ุงูฺฉู ุจู ููฺฉโูุง ููุฌูุฏ ุฑุง ุฏููุฏ ู ุง ุฑุง ุฎูุฏ ุฑุง ุจุงุฒฺฏุฑุฏุงููุฏ.<br />
ูโุชูุงูุฏ ูพุฑูฺูโ ุงุตู ุฑุง ุฏุฑ 
<a href="https://github.com/howtographql/react-apollo" > ุงู ููฺฉ</a>
ูุดุงูุฏู ฺฉูุฏ.
</p>

<p dir="rtl" style="position:right;">
ุฏุฑ ฺฉูุ ุนููโูุง ฺฉู ุฏุฑ ุงู ูพุฑูฺู ุงูุฌุงู ูโุดููุฏ ุนุจุงุฑุชูุฏ ุงุฒ : <br />
- ููุงุด ูุณุช ุงุฒ ููฺฉโูุง <br />
- ุงูฺฉุงู ุฌุณุช ู ุฌู ุฏุฑ ูุณุช ููฺฉโูุง <br />
- ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ <br />
- ุจู ฺฉุงุฑุจุฑุงู ฺฉู ุงุญุฑุงุฒ ููุช ุดุฏูโุงูุฏ ุงุฌุงุฒู ูโุฏูุฏ ฺฉู ููฺฉโูุง ุฌุฏุฏ ุงุฌุงุฏ ฺฉููุฏ. <br />
- ุจู ฺฉุงุฑุจุฑุงู ฺฉู ุงุญุฑุงุฒ ููุช ุดุฏู ุงูุฏุ ุงุฌุงุฒูโ ุฑุง ุฏุงุฏู ุจู ูุฑ ฺฉุฏุงู ุงุฒ ููฺฉโูุง ุง ุจุฑุฏุงุดุชู ุฑุง ุฎูุฏ ุงุฒ ุขูโูุง ุฑุง ูโุฏูุฏ. <br />
- ุงฺฏุฑ ฺฉุงุฑุจุฑุงู ุชุบุฑ ุฏุฑ ูุณุช ููฺฉโูุง ุฏููุฏุ ุณุฑุน ุจู ุฑูุฒ ุฑุณุงู ูโุดูุฏ. 
</p>

<p  dir="rtl" style="position:right;">
ุจุฑุง ูพุงุฏูโุณุงุฒ ุงู ูพุฑูฺู ุจุฑุง  frontend ู backend ุงุฒ ุชฺฉููููฺโูุง ุฒุฑ ุงุณุชูุงุฏู ุดุฏูโุงุณุช. <br />
- ูุฑุงูุช : React ู Apollo Client 3.2<br />
- ุจฺฉ : Apollo Server 2.18 ู Prisma
</p>

## <p  dir="rtl" style="position:right;"> ฺฉูุงูุช GraphQL</p>

<p dir="rtl" style="position:right;">
ุฏุฑ ุณูุช ฺฉูุงูุช ุจุฑุง ุงูุฌุงู ุฏุงุฏู ฺฉุงุฑโูุง ุชฺฉุฑุงุฑ ูุงููุฏ ูุฑุณุชุงุฏู query ู ุบุฑู ุงุฒ GraphQL client ุงุณุชูุงุฏู ูโฺฉูู ฺฉู ุงุฒ ฺฉุงุฑโูุง ุชฺฉุฑุงุฑ ุฌููฺฏุฑ ูโฺฉูุฏ ู ุชููุง ุจุง ฺฉ ุจุงุฑ ุตุฏุง ุฒุฏู API ูโุชูุงูุฏ ุงุทูุงุนุงุช ููุฑุฏูุงุฒ ุฎูุฏ ุฑุง ุงุฒ ุณูุช ุณุฑูุฑ ุฏุฑุงูุช ฺฉูุฏ. <br />
ุจุฑุง ูพุงุฏูโุณุงุฒ ฺฉูุงูุช GraphQL ฺฉุชุงุจุฎุงููโูุง ูุชูุงูุช ููุงููุฏ Apolloุ Relay ู urql ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ูุฑ ฺฉุฏุงู ุงุฒ ุงู ฺฉุชุงุจโุฎุงููโูุง ุฎูุจโูุง ู ุจุฏโูุง ุฏุงุฑูุฏ ู ูุฒุงู ฺฉูุชุฑู ูุฑ ฺฉ ุงุฒ ุขูโูุง ุฑู ุฑููุฏ ุนููุงโุชโูุง ุฏุฑ ุญุงู ุงูุฌุงู GraphQL ูุชูุงูุช ุงุณุช. <br />
ุฏุฑ ูพุงุฏูโุณุงุฒ ูพุฑูฺูโู ุฐฺฉุฑ ุดุฏู ุงุฒ Apollo Client ุงุณุชูุงุฏู ูโฺฉูู. <br />
</p>

### <p  dir="rtl" style="position:right;">  ุชูุถุญ ูุณูุชโูุง ูุฑุจูุท ุจู graphQL ุฏุฑ ุจุฎุด front ูพุฑูฺู</p>

<p dir="rtl" style="position:right;">
ฺฉู ูุงูโูุง ูุฑุจูุท ุจู ุจุฎุด front ุณุงุช ุฏุฑ ูพูุดูโ front ูุฑุงุฑ ุฏุงุฑุฏ.<br />
ุฏุฑ ูพูุดูโ src ูพูุดูโ ุฏฺฏุฑ ุจู ูุงู components ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุจุฎุดโูุง ูุฎุชูู ุจุฑุง ุณุงุฎุชู front ุฏุฑ ุขู ูพุงุฏูโุณุงุฒ ุดุฏูโุงูุฏ.<br/>
ุญุงู ุจู ุชูุถุญ ูุฑ ฺฉุฏุงู ุงุฒ ุขูโูุง ูโูพุฑุฏุงุฒู.
</P>

<p dir="rtl" style="position:right;">
ุฏุฑ ูพูุดูโ components ูุงู ุจู ูุงู Link.js ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ูุฑุจูุท ุจู ูุฑ ฺฉุฏุงู ุงุฒ ููฺฉโูุง ููุฌูุฏ ุฏุฑ ุจุฑูุงูู ุงุณุช. ุงู component ุจู ุตูุฑุช ุฒุฑ ูพุงุฏูโุณุงุฒ ูโุดูุฏ.
</p>

```js
import React from 'react';

const Link = (props) => {
  const { link } = props;
  return (
    <div>
      <div>
        {link.description} ({link.url})
      </div>
    </div>
  );
};

export default Link;
```
<p dir="rtl" style="position:right;">
ูุงู ุฏฺฏุฑ ุจู ูุงู LinkList.js ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุฏุฑ ุขู ููฺฉโูุง ฺฉู ุฏุฑ ุตูุญูโ ููุงุด ุฏุงุฏูโ ูโุดููุฏ ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูู. ูพุงุฏูโุณุงุฒ ุงู component ุจู ุตูุฑุช ุฒุฑ ุงุณุช .
</p>

```js
import React from 'react';
import Link from './Link';

const LinkList = () => {
  const linksToRender = [
    {
      id: '1',
      description:
        'Prisma gives you a powerful database toolkit ๐',
      url: 'https://prisma.io'
    },
    {
      id: '2',
      description: 'The best GraphQL client',
      url: 'https://www.apollographql.com/docs/react/'
    }
  ];

  return (
    <div>
      {linksToRender.map((link) => (
        <Link key={link.id} link={link} />
      ))}
    </div>
  );
};

export default LinkList;
```


<p dir="rtl" style="position:right;">
ุงุฒ linked list ูพุงุฏูโุณุงุฒ ุดุฏู ุฏุฑ App.js ุงุณุชูุงุฏู ูโฺฉูู ฺฉู component ุงุตู ูุง ุงุณุช ุชุง ููฺฉโูุง ุฏุฑ ุตูุญู ููุงุด ุฏุงุฏู ุดููุฏ.
</p>

<p dir="rtl" style="position:right;">
ุญุงู ุจู ุชูุถุญ ูุญููโ ุงุณุชูุงุฏู ุงุฒ queryโูุง GraphQL ูโูพุฑุฏุงุฒู ู ุงูฺฉู ฺฺฏููู ุงุฒ ุขูโูุง ุฏุฑ ุจุฑูุงูู ุงุณุชูุงุฏู ฺฉูู.
ุจุฑุง ุงุณุชูุงุฏู ุงุฒ query ููุฑุฏ ูุธุฑ ุฎูุฏ ุงุจุชุฏุง ุจุงุฏ ุขู ุฑุง ุชุนุฑู ฺฉูู. ุจุฑุง ูุซุงู ุงฺฏุฑ ุจุฎูุงูู ฺฉ query ุจู ูุงู feed ุชุนุฑู ฺฉูู ุฏุงุฑู :
</p>

```graphql
{
  feed {
    id
    links {
      id
      createdAt
      description
      url
    }
  }
}
```
<p dir="rtl" style="position:right;">
ุงฺฉููู ุจุงุฏ ุจุจูู ฺฉู ฺฺฏููู queryโูุง ุฎูุฏ ุฑุง ุฏุฑ ุจุฑูุงูู ู ุจุง ุงุณุชูุงุฏู ุงุฒ javascript ูพุงุฏูโุณุงุฒ ฺฉูู. ุจุฑุง ุงูฺฉุงุฑ ุงุฒ ฺฉุชุงุจโุฎุงููโ apollo/client ุงุณุชูุงุฏู ูโฺฉูู ู ุงุฒ ุชูุงุจุน ุขู ุฏุฑ ูพุงุฏูโุณุงุฒ queryโูุง ุงุณุชูุงุฏู ูโฺฉูู. ุจุฑุง ุชุนุฑู query ุงุฒ ุชุงุจุน useQuery ู ฺฉุชุงุจโุฎุงููโ gql ุฏุฑ apollo/client ุงุณุชูุงุฏู ูโฺฉูู. <br />
ุจุฑุง ูุซุงู ูโุฎูุงูู ุฏุฑ ูุงู linkedlist.js ฺฉ query ุจู ูุงู FEED_QUERY ุชุนุฑู ฺฉูู. ุจุง ุงุณุชูุงุฏู ุงุฒ gql ุฏุงุฑู :
</p>

```js
import { useQuery, gql } from '@apollo/client';

const FEED_QUERY = gql`
  {
    feed {
      id
      links {
        id
        createdAt
        url
        description
      }
    }
  }
`;
```

<p dir="rtl" style="position:right;">
ูพุณ ุชุง ุงูุฌุง query ุฑุง ุชุนุฑู ฺฉุฑุฏูโุงู. ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุขู ุงุฒ ุชุงุจุน useQuery ุงุณุชูุงุฏู ูโฺฉูู ู query ุชุนุฑู ุดุฏู ุฑุง ุจู ุขู ูพุงุณ ูโุฏูู. ุงู ุชุงุจุน ฺฉ ุฏุงุฏู ุจู ูุง ุจุงุฒ ูโฺฏุฑุฏุงูุฏ ฺฉู ุงุทูุงุนุงุช ุฑุง ฺฉู ุฏุฑ query ุชุนุฑู ฺฉุฑุฏู ุจูุฏู ู ูุฎูุงุณุชู ุงุฒ ุณุฑูุฑ ุฏุฑุงูุช ฺฉูู ุดุงูู ูโุดูุฏ. ฺฉุฏ linkedlist.js ุจู ุตูุฑุช ุฒุฑ ุฏุฑ ูโุขุฏ :
</p>

```js
const LinkList = () => {
  const { data } = useQuery(FEED_QUERY);

  return (
    <div>
      {data && (
        <>
          {data.feed.links.map((link) => (
            <Link key={link.id} link={link} />
          ))}
        </>
      )}
    </div>
  );
};
```

## <p dir="rtl" style="position:right;">ุชูุถุญ gql ู useQuery</p>
<p dir="rtl" style="position:right;">
Gql ฺฉุชุงุจโุฎุงููโุง ุงุณุช ฺฉู ุจุฑุง ุชุฌุฒูโ query ุชุนุฑู ุดุฏู ุจุฑุง GraphQL ุงุณุชูุงุฏู ูโุดูุฏ. ุณูพุณ query ุชุนุฑู ุดุฏู ุชูุณุท gql ุฑุง ุจู ุชุงุจุน useQuery ูพุงุณ ูโุฏูู. ฺุฒ ฺฉู ุงู ุชุงุจุน ุจุงุฒ ูโฺฏุฑุฏุงูุฏ ุงุฒ ณ ุจุฎุด ุฒุฑ ุชุดฺฉู ุดุฏูโุงุณุช :<br />
- Loading : ฺฉ ูุชุบุฑ bool ุงุณุช ฺฉู ุงฺฏุฑ ููุฏุงุฑ ุขู true ุจุงุดุฏุ ุจู ุงู ูุนูุงุณุช ฺฉู ูููุฒ ูพุงุณุฎ ุงุฒ ุณูุช ุณุฑูุฑ ุฏุฑุงูุช ูุดุฏู ู ุนููุงุช request ุฏุงุฏู ููฺูุงู ุฏุฑ ุญุงู ุงูุฌุงู ุงุณุช. <br />
- Error : ุงฺฏุฑ ุฏุฑ ุญู request ุฏุงุฏู ู ุง ุฏุฑุงูุช ุฏุงุฏู ุงุฑูุฑ ุฑุฎ ุฏูุฏุ ุชูุถุญุงุช ูุฑุจูุท ุจู ุงู ุงุฑูุฑ ู ุนูุช ุขู ุฏุฑ ุงู ูุณูุช ูุฑุงุฑ ูโฺฏุฑุฏ. <br />
- Data : ุงู ูุณูุช ููุงู ุฏุงุฏูโ ุฎูุงุณุชู ุดุฏู ุงุฒ ุณูุช client ุงุณุช ฺฉู ุงุฒ ุณุฑูุฑ ุฏุฑุงูุช ุดุฏู ุงุณุช. ุฏุฑ ูุซุงู ุจุงูุง ุฏุฑ ูุงู linkedlist.js ุงู ููุฏุงุฑ ุจุฑุงุจุฑ ุจุง ูุณุช ุงุฒ ููฺฉโูุง ููุฌูุฏ ูโุจุงุดุฏ. ุงู ุฏุงุฏูโูุง ุจู ููุงู ุดฺฉู query ุชุนุฑู ุดุฏู ุฏุฑุงูุช ูโุดูุฏ ุจู ุงู ุตูุฑุช ฺฉู ููฺฉโูุง ุฏุฑ data.feed.links ูุฑุงุฑ ุฏุงุฑูุฏ.
</p>

<p dir="rtl" style="position:right;">
ููุงูโุทูุฑ ฺฉู ุชูุถุญ ุฏุงุฏู ุดุฏุ ุฏุฑ GraphQL ุฏู ุนููุงุช ููู ุฏุงุฑู : Query ู Mutation <br />
ุฏุฑ ูุณูุช ูุจู ูุดุงู ุฏุงุฏู ฺฉู ฺฺฏููู ุจู ุณุฑูุฑ query ููุฑุณุชู ู  ฺุทูุฑ ูโุชูุงูู ุฏุงุฏูโูุง ุฑุง ุงุฒ ุณุฑูุฑ ุจฺฏุฑู ู ุขู ุฑุง ููุงุด ุฏูู. ุญุงู ูโุฎูุงูู ุจุจูู ฺฺฏููู ูโุชูุงูู ุจุง ุงุณุชูุงุฏู ุงุฒ Apollo client ุฏุงุฏูโูุง ุฑุง ุชุบุฑ ุฏูู ู ุง ุฏุงุฏูโ ุฌุฏุฏ ุงุถุงูู ฺฉูู. ุจุฑุง ุงูฺฉุงุฑ ููุงููุฏ ูุณูุช ูุจู ุงุฒ gql ุงุณุชูุงุฏู ูโฺฉููุ ุงูุง ุจู ุฌุง ุชุงุจุน useQuery ุงุฒ useMutation ุงุณุชูุงุฏู ูโฺฉูู. <br />
<br />
ุฏุฑ ูพูุดูโ src/components ูุงู ุจู ูุงู CreateLink.js ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ูุฑุจูุท ุจู ุณุงุฎุชู ููฺฉ ุฌุฏุฏ ุชูุณุท ฺฉุงุฑุจุฑ ุฏุฑ ุจุฑูุงูู ุงุณุช . <br />
ุฏุฑ ุงุจุชุฏุง ุงู ูุงู ุจู ุดฺฉู ุฒุฑ ุงุณุช : <br />
</p>

```js
import React, { useState } from 'react';

const CreateLink = () => {
  const [formState, setFormState] = useState({
    description: '',
    url: ''
  });

  return (
    <div>
      <form
        onSubmit={(e) => {
          e.preventDefault();
        }}
      >
        <div className="flex flex-column mt3">
          <input
            className="mb2"
            value={formState.description}
            onChange={(e) =>
              setFormState({
                ...formState,
                description: e.target.value
              })
            }
            type="text"
            placeholder="A description for the link"
          />
          <input
            className="mb2"
            value={formState.url}
            onChange={(e) =>
              setFormState({
                ...formState,
                url: e.target.value
              })
            }
            type="text"
            placeholder="The URL for the link"
          />
        </div>
        <button type="submit">Submit</button>
      </form>
    </div>
  );
};

export default CreateLink;
```
<p dir="rtl" style="position:right;">
ุญุงู ุจุง ุงุณุชูุงุฏู ุงุฒ gql ฺฉ mutation ุจู ูุงู CREATE_LINK_MUTATION ุจู ุตูุฑุช ุฒุฑ ุชุนุฑู ูโฺฉูู.
</p>

```js
import { useMutation, gql } from '@apollo/client';

const CREATE_LINK_MUTATION = gql`
  mutation PostMutation(
    $description: String!
    $url: String!
  ) {
    post(description: $description, url: $url) {
      id
      createdAt
      url
      description
    }
  }
`;
```
<p dir="rtl" style="position:right;">
ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน useMutation ูโุฎูุงูู ุนูุถ ฺฉุฑุฏู ููฺฉโูุง ุฑุง ูพุงุฏูโุณุงุฒ ฺฉูู. ุจู ุงู ุชุงุจุน mutation ุชุนุฑู ุดุฏู ุฏุฑ ูุณูุช ูุจู ู ูุชุบุฑโูุงโ ฺฉู ูโุฎูุงูู ุชุบุฑ ุฏูู ุฑุง ูพุงุณ ุฏูู. ุงู ุชุงุจุน ฺฉ function ุจู ูุง ุจุฑูโฺฏุฑุฏุงูุฏ ฺฉู ูุฑ ฺฏุงู ุจุฎูุงูู ูโุชูุงูู ุจุฑุง ุนูุถ ฺฉุฑุฏู ููฺฉโูุง ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูู. ูพุณ ุชฺฉู ฺฉุฏ ุฒุฑ ุจู CreateLink ุงุถุงูู ูโุดูุฏ.
</p>

```js
const CreateLink = () => {
  // ...
  const [createLink] = useMutation(CREATE_LINK_MUTATION, {
    variables: {
      description: formState.description,
      url: formState.url
    }
  });
  // ...
};
```
<p dir="rtl" style="position:right;">
ุฏุฑ ฺฉุฏ ุจุงูุงุ createLink ููุงู ุชุงุจุน ุงุณุช ฺฉู ูโุชูุงูู ูุฑ ฺฏุงู ุจุฎูุงูู ุขู ุฑุง ุตุฏุง ฺฉูู. ูพุณ ุขู ุฑุง ุจู ููฺฏุงู submitฺฉุฑุฏู ูุฑู ุตุฏุง ูโุฒูู. 
</p>
```js
return (
  <div>
    <form
      onSubmit={(e) => {
        e.preventDefault();
        createLink();
      }}
    >
      ...
    </form>
  </div>
);
```
<p dir="rtl" style="position:right;">
ุญุงู ูโุฎูุงูู ุจู ุชูุถุญ ูุณูุชโูุง ูุฑุจูุท ุจู authentication ููุงููุฏ login ุจูพุฑุฏุงุฒู. <br />
ุฏุฑ ูพูุดูโ src/components ูุงู ุจู ูุงู login.js ุฏุงุฑู ฺฉู ฺฉุฏ ุงููู ุขู ุจู ุตูุฑุช ุฒุฑ ุงุณุช :
</p>

```js
import React, { useState } from 'react';
import { useHistory } from 'react-router';

const Login = () => {
  const history = useHistory();
  const [formState, setFormState] = useState({
    login: true,
    email: '',
    password: '',
    name: ''
  });

  return (
    <div>
      <h4 className="mv3">
        {formState.login ? 'Login' : 'Sign Up'}
      </h4>
      <div className="flex flex-column">
        {!formState.login && (
          <input
            value={formState.name}
            onChange={(e) =>
              setFormState({
                ...formState,
                name: e.target.value
              })
            }
            type="text"
            placeholder="Your name"
          />
        )}
        <input
          value={formState.email}
          onChange={(e) =>
            setFormState({
              ...formState,
              email: e.target.value
            })
          }
          type="text"
          placeholder="Your email address"
        />
        <input
          value={formState.password}
          onChange={(e) =>
            setFormState({
              ...formState,
              password: e.target.value
            })
          }
          type="password"
          placeholder="Choose a safe password"
        />
      </div>
      <div className="flex mt3">
        <button
          className="pointer mr2 button"
          onClick={() => console.log('onClick')}
        >
          {formState.login ? 'login' : 'create account'}
        </button>
        <button
          className="pointer button"
          onClick={(e) =>
            setFormState({
              ...formState,
              login: !formState.login
            })
          }
        >
          {formState.login
            ? 'need to create an account?'
            : 'already have an account?'}
        </button>
      </div>
    </div>
  );
};

export default Login;
```

<p dir="rtl" style="position:right;">
ุฏุฑ ฺฉุฏ ุจุงูุง ุฏู ูุณูุช ุงุตู ูุฌูุฏ ุฏุงุฑุฏ:<br />
-  ฺฉ ูุณูุช ุจุฑุง ฺฉุงุฑุจุฑุงู ฺฉู ุซุจุชโูุงู ฺฉุฑุฏู ุงูุฏ ู ุญุณุงุจ ฺฉุงุฑุจุฑ ุฏุงุฑูุฏ ฺฉู ุจุฑุง ุงู ฺฉุงุฑุจุฑุงู ุฏู ูุฑูุฏ ูุฑุจูุท ุจู ุงูู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุงู ููุงุด ุฏุงุฏูโ ูโุดูุฏ. <br />
- ฺฉ ูุณูุช ุจุฑุง ฺฉุงุฑุจุฑุงู ฺฉู ูููุฒ ุซุจุช ูุงู ูฺฉุฑุฏู ุงูุฏ ู ุงูู ุจุงุฏ ุฏุฑ ุณุงุช ุซุจุช ูุงู ฺฉููุฏ. ุจุฑุง ุงู ฺฉุงุฑุจุฑุงู ุฏู ูุฑูุฏ ูุจู ุจู ููุฑุงู ฺฉ ูุฑูุฏ ุฏฺฏุฑ ุจุฑุง ุงุณู ฺฉุงุฑุจุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ. <br />
<br />
ูุถุนุช ฺฉุงุฑุจุฑ ุจุง ุชูุฌู ุจู ูุชุบุฑ formState.login ูุดุฎุต ูโุดูุฏ ู ุจุง ุชูุฌู ุจู ุขูุ ฺฉ ุงุฒ ุฏู ูุณูุช ุชูุถุญ ุฏุงุฏูโุดุฏู ุฏุฑ ุจุงูุง ููุงุด ุฏุงุฏู ูโุดูุฏ. <br />
<br />
ุจุฑุง ูุฑ ฺฉุฏุงู ุงุฒ login ุง signup ุ ูุงุฒ ุจู ุชุนุฑู ู ุงุณุชูุงุฏู mutationโูุง ูุฑุจูุท ุจู ูุฑ ฺฉ ุฏุงุฑู. ุงู mutationโูุง ุฑุง ุจู ุตูุฑุช ุฒุฑ ุชุนุฑู ูโฺฉูู : <br />
</p>

```js
const SIGNUP_MUTATION = gql`
  mutation SignupMutation(
    $email: String!
    $password: String!
    $name: String!
  ) {
    signup(
      email: $email
      password: $password
      name: $name
    ) {
      token
    }
  }
`;

const LOGIN_MUTATION = gql`
  mutation LoginMutation(
    $email: String!
    $password: String!
  ) {
    login(email: $email, password: $password) {
      token
    }
  }
`;
```

<p dir="rtl" style="position:right;">
ูุฑ ฺฉุฏุงู ุงุฒ ุงู mutation ูุง ฺฉ ุณุฑ ูพุงุฑุงูุชุฑโูุง ูโฺฏุฑุฏ ู ฺฉ token ุจุงุฒ ูโฺฏุฑุฏุงููุฏ ฺฉู ุงุฒ ุขู ุจุฑุง ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ ุงุณุชูุงุฏู ูโฺฉูู. ุงฺฉููู ุจุงุฏ ุฏู ุชุงุจุน login ู signup ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน useMutation ุชุนุฑู ฺฉูู ฺฉู ุขูโูุง ุฑุง ุจู ููฺฏุงู ฺฉูฺฉ ฺฉุฑุฏู ุจุฑ ุฑู ุฏฺฉููโูุง login ู signup ุตุฏุง ฺฉูู. ูพุณ ุฏุงุฑู :
</p>

```js
const [login] = useMutation(LOGIN_MUTATION, {
  variables: {
    email: formState.email,
    password: formState.password
  },
  onCompleted: ({ login }) => {
    localStorage.setItem(AUTH_TOKEN, login.token);
    history.push('/');
  }
});

const [signup] = useMutation(SIGNUP_MUTATION, {
  variables: {
    name: formState.name,
    email: formState.email,
    password: formState.password
  },
  onCompleted: ({ signup }) => {
    localStorage.setItem(AUTH_TOKEN, signup.token);
    history.push('/');
  }
});
```

<p dir="rtl" style="position:right;">
ููุงูโุทูุฑ ฺฉู ฺฏูุชู ุดุฏุ ูุณูุช ุฏฺฏุฑ ุฏุฑ ูพุฑูฺู ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุฏุฑ ุขู ฺฉุงุฑุจุฑุงู ฺฉู ุฏุฑ ุณุงุช ุซุจุช ูุงู ุดุฏูโุงูุฏ ูโุชูุงููุฏ ุจู ูุฑ ฺฉุฏุงู ุงุฒ ููฺฉโูุง ุฑุง ุฏููุฏ ุง ุฑุง ุฎูุฏ ุฑุง ูพุณ ฺฏุฑูุฏ. <br />
ุจุฑุง ุงูฺฉู ูุถุนุช ูุฑ ููฺฉ ุฑุง ุจุง ุชูุฌู ุจู ุฑุง ฺฉุงุฑุจุฑ ุนูุถ ฺฉููุ queryโุง ฺฉู ูุจูุง ุจุง ูุงู FEED_QUERY ุฏุฑ ูุงู LinkList.js ููุดุชู ุจูุฏู ุฑุง ุจูโุฑูุฒุฑุณุงู ูโฺฉูู ฺฉู ฺฉุฏ ุฌุฏุฏ ุขู ุจู ุตูุฑุช ุฒุฑ ุงุณุช :
</p>

```js
export const FEED_QUERY = gql`
  {
    feed {
      id
      links {
        id
        createdAt
        url
        description
        postedBy {
          id
          name
        }
        votes {
          id
          user {
            id
          }
        }
      }
    }
  }
`;
```
<p dir="rtl" style="position:right;">
ููฺูู ูุงุฒ ุจู ฺฉ mutation ุจุฑุง ุนููุงุช ุฑุง ุฏุงุฏู ูุงุฒ ุฏุงุฑู ฺฉู ุขู ุฑุง ุจุง ูุงู VOTE_MUTATION ุฏุฑ ูุงู Link.js ุจู ุตูุฑุช ุฒุฑ ูโููุณู :
</p>

```js
const VOTE_MUTATION = gql`
  mutation VoteMutation($linkId: ID!) {
    vote(linkId: $linkId) {
      id
      link {
        id
        votes {
          id
          user {
            id
          }
        }
      }
      user {
        id
      }
    }
  }
`;
```
<p dir="rtl" style="position:right;">
ููุงููุฏ ูุจู ุงุฒ ุชุงุจุน useMutation ุงุณุชูุงุฏู ูโฺฉูู ุชุง ุชุงุจุน ุจู ูุงู vote ุจุณุงุฒู ู ูุฑ ุฌุง ฺฉู ูุงุฒ ุจูุฏ ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูู. ูพุงุฑุงูุชุฑูุง ฺฉู ุจู ุชุงุจุน useMutation ุฏุฑ ุงู ูุณูุช ูพุงุณ ูโุฏููุ VOTE_MUTATION ู ุดูุงุณูโ ููฺฉ ฺฉู ฺฉุงุฑุจุฑ ุงูุชุฎุงุจ ฺฉุฑุฏู ุงุณุช.<br />
ุจูุงุจุฑุงู ูุงู Link.js ุฑุง ุจู ุตูุฑุช ุฒุฑ ุจู ุฑูุฒ ุฑุณุงู ูโฺฉูู : 
</p>

```js
const Link = (props) => {
  // ...
  const [vote] = useMutation(VOTE_MUTATION, {
    variables: {
      linkId: link.id
    }
  });
  return (
    <div className="flex mt2 items-start">
      <div className="flex items-center">
        <span className="gray">{props.index + 1}.</span>
        <div
          className="ml1 gray f11"
          style={{ cursor: 'pointer' }}
          onClick={vote}
        >
          โฒ
        </div>
      </div>
      <div className="ml1">
        <div>
          {link.description} ({link.url})
        </div>
        {authToken && (
          <div className="f6 lh-copy gray">
            {link.votes.length} votes | by{' '}
            {link.postedBy ? link.postedBy.name : 'Unknown'}{' '}
            {timeDifferenceForDate(link.createdAt)}
          </div>
        )}
      </div>
    </div>
  );
};
```
<p dir="rtl" style="position:right;">
ููุงูโุทูุฑ ฺฉู ูุจููุ ุชุงุจุน vote ุฑุง ุจุง ฺฉูฺฉ ฺฉุฑุฏู ุจุฑ ุฑู ุนูุงูุช ฺฉูุงุฑ ูุฑ ููฺฉ ุตุฏุง ูโุฒูู.
</p>

<p dir="rtl" style="position:right;">
<br />
ฺฉ ุงุฒ ูฺฺฏโูุง ุฏฺฏุฑ apollo client ุงู ุงุณุช ฺฉู ุจุฑุง ุทุฑู client ุฏุฑ ุจุฑูุงููโูุง ูุฑุจูุท ุจู graphQLุ ฺฉ ุญุงูุธูโ ููุงู ุงุฌุงุฏ ู ูฺฏูุฏุงุฑ ูโฺฉูุฏ. ูุนูููุง ูุงุฒ ูุณุช ฺฉุงุฑ ุฒุงุฏ ุจุฑุง ูุฏุฑุช ุงู ุญุงูุธู ุงูุฌุงู ุฏููุ ุงูุง ุจุนุถ ุงููุงุช ุจุง ุชูุฌู ุจู ุดุฑุงุท ูุงุฒ ุจู ุจุฑุฎ ุฑุงูฺฉุงุฑโูุง ุฏุฑ ุงู ุฒููู ุฏุงุฑู. <br />
<br />
ุจุฑุง ูุซุงู ุฏุฑ ุงู ูพุฑูฺูุ ููุช ุฏุฑุฎูุงุณุช mutation ุจุฑุง ุณุฑูุฑ ููุฑุณุชูุ ูุงุฒ ุงุณุช ุจู ุทูุฑ ุฏุณุช ุฏุฑ ุจูโุฑูุฒ ุฑุณุงู ฺฉุฑุฏู ุญุงูุธู ุฏุฎุงูุช ุฏุงุดุชู ุจุงุดู. ุงู ฺฉุงุฑ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุงูฺฉุงูุงุช ฺฉู apollo client ุฏุฑ ุงุฎุชุงุฑ ูุง ูุฑุงุฑ ูโุฏูุฏ ูโุชูุงูู ุงูุฌุงู ุฏูู. <br />
ููฺฏุงู ฺฉู ุฏุฑ ูุงู Link.jsุ ุฏุฑุฎูุงุณุช mutation ุจุฑุง vote ููุฑุณุชูุ ุงู ุจูโุฑูุฒ ุฑุณุงู ุญุงูุธู ุจุงุฏ ุงูุฌุงู ุดูุฏ. ุจูุงุจุฑุงู ุชุงุจุน ุฑุง ฺฉู ุฏุฑ ูุงู Link.js ุจุง ูุงู vote ุจุง ุงุณุชูุงุฏู ุงุฒ useMutation ุงุฌุงุฏ ฺฉุฑุฏูโุงู ุฑุง ุจู ุตูุฑุช ุฒุฑ ุนูุถ ูโฺฉูู :
</p>

```js
const Link = (props) => {
  // ...
  const [vote] = useMutation(VOTE_MUTATION, {
    variables: {
      linkId: link.id
    },
    update(cache, { data: { vote } }) {
      const { feed } = cache.readQuery({
        query: FEED_QUERY
      });

      const updatedLinks = feed.links.map((feedLink) => {
        if (feedLink.id === link.id) {
          return {
            ...feedLink,
            votes: [...feedLink.votes, vote]
          };
        }
        return feedLink;
      });

      cache.writeQuery({
        query: FEED_QUERY,
        data: {
          feed: {
            links: updatedLinks
          }
        }
      });
    }
  });

  // ...
};
```
<p dir="rtl" style="position:right;">
ุฏุฑ ฺฉุฏ ุจุงูุงุ ุชุงุจุน update ุจุนุฏ ุงุฒ ฺฉุงูู ุดุฏู mutation ุงูุฌุงู ูโุดูุฏ ู ุจู ูุง ุงุฌุงุฒู ูโุฏูุฏ ฺฉู ุงุฒ ุญุงูุธูโ ุจุฎูุงูู ุง ุฏุงุฏูโุง ุฑุง ุชุบุฑ ุฏูู ู ุขู ุฑุง ุฐุฎุฑู ฺฉูู.<br />
ููุงูโุทูุฑ ฺฉู ูโุจูู ุฏุฑ ุชุงุจุน updateุ ุชุงุจุน ุจู ูุงู cache.readQuery ุตุฏุง ุฒุฏู ุดุฏู ฺฉู ุจู ุขูุ FEED_QUERY ุฑุง ุจู ุนููุงู query ุฏุงุฏู ูโุดูุฏ. ุงู ฺฉุงุฑ ุจู ูุง ุงู ุงุฌุงุฒู ุฑุง ูโุฏูุฏ ฺฉู ุฏููุง ุจู ููุงู ุจุฎุด ุงุฒ ุญุงูุธู ฺฉู ูโุฎูุงูู ุขู ุฑุง ุจู ุฑูุฒุฑุณุงู ฺฉูู ุฏุณุชุฑุณ ูพุฏุง ฺฉูู. ุญุงูุง ฺฉู ุจู ุงู ูุณูุช ุงุฒ ุญุงูุธู ุฏุณุชุฑุณ ุฏุงุฑูุ ูโุชูุงูู ฺฉ ุขุฑุงูโ ุฌุฏุฏ ุงุฒ ุฏุงุฏูโูุง ุดุงูู ุฑุง ุฌุฏุฏ ฺฉู ุณุงุฎุชู ุดุฏู ุจุณุงุฒู. ุญุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน cache.writeQuery ุงู ูุณุช ุฌุฏุฏ ุฑุง ุฏุฑ ุญุงูุธู ุฐุฎุฑู ู ูุณุช ุฑุงโูุง ุฑุง ุจู ุฑูุฒุฑุณุงู ูโฺฉูู.<br />
ูููโฺฉุงุฑ ุฑุง ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ููฺฉ ุฌุฏุฏ ุฏุฑ ูุงู CreateLink.js ูุฒ ุจุงุฏ ุงูุฌุงู ุฏูู. ูพุณ ุชุงุจุน createLink ุฑุง ุจู ุตูุฑุช ุฒุฑ ุชุบุฑ ูโุฏูู :
</p>

```js
const [createLink] = useMutation(CREATE_LINK_MUTATION, {
    variables: {
      description: formState.description,
      url: formState.url
    },
    update: (cache, { data: { post } }) => {
      const take = LINKS_PER_PAGE;
      const skip = 0;
      const orderBy = { createdAt: 'desc' };

      const data = cache.readQuery({
        query: FEED_QUERY,
        variables: {
          take,
          skip,
          orderBy
        }
      });

      cache.writeQuery({
        query: FEED_QUERY,
        data: {
          feed: {
            links: [post, ...data.feed.links]
          }
        },
        variables: {
          take,
          skip,
          orderBy
        }
      });
    },
    onCompleted: () => history.push('/new/1')
  });
```

<p dir="rtl" style="position:right;">
ุฏุฑ ฺฉุฏ ุจุงูุง ูุฒุ ุชุงุจุน update ุจู ุดฺฉู ูุจู ฺฉุงุฑ ูโฺฉูุฏ. ุงุจุชุฏุง ูุชุฌูโูุง ูุนู FEED_QUERY ุฑุง ูโุฎูุงูู ู ุณูพุณ ููฺฉ ุฌุฏุฏ ุฑุง ุจู ุขู ุงุถุงูู ูโฺฉูู ู ููุงููุฏ ูุจู ุฏูุจุงุฑู ุขู ุฑุง ุฏุฑ ุญุงูุธู ูโููุณู.<br />
<br />
ฺฉ ุฏฺฏุฑ ุงุฒ ูุณูุชโูุง ุงู ูพุฑูฺูุ ุชูุงูุง ุฌุณุช ู ุฌู ฺฉุฑุฏู ฺฉุงุฑุจุฑ ูุงู ููฺฉโูุง ุงุณุช. ุจู ุชูุถุญ ูุณูุชโูุง ูุฑุจูุท ุจู GraphQL ุงู ุจุฎุด ูโูพุฑุฏุงุฒู.<br />
ูุงู ุจู ูุงู Search.js ุฏุฑ ูพูุดูโ src/components ูุฌูุฏ ุฏุงุฑุฏ. ุจุฑุง ุงู ูุณูุชุ ูุงุฒ ุจู ููุดุชู ฺฉ query ุจุฑุง ููุชุฑฺฉุฑุฏู ูุณุช ููฺฉโูุง ุฏุงุฑู. ูพุณ ฺฉูุฆุฑ FEED_SEARCH_QUERY ุฏุฑ ุงู ูุงู ุจู ุตูุฑุช ุฒุฑ ูุฑุงุฑ ุฏุงุฑุฏ :
</p>

```js
const FEED_SEARCH_QUERY = gql`
  query FeedSearchQuery($filter: String!) {
    feed(filter: $filter) {
      id
      links {
        id
        url
        description
        createdAt
        postedBy {
          id
          name
        }
        votes {
          id
          user {
            id
          }
        }
      }
    }
  }
`;
```
<p dir="rtl" style="position:right;">
ุงู ฺฉูุฆุฑ ฺฉ ูพุงุฑุงูุชุฑ ุจู ูุงู filter ูโฺฏุฑุฏ ฺฉู ุจุฑุง ููุชุฑฺฉุฑุฏู ูุณุช ููฺฉโูุง ุงุฒ ุงู ุงุณุชูุงุฏู ูโฺฉูุฏ. ุงุฒ ูพุงุฑุงูุชุฑ filter ุฏุฑ ูุงูุน ุฏุฑ ฺฉ ุงุฒ ูุงูโูุง ูุฑุจูุท ุจู ุณุฑูุฑ ุฏุฑ ูุณุฑ server/src/resolvers/Query.js ุงุณุชูุงุฏู ูโุดูุฏ ฺฉู ฺฉุฏ ุงู ูุณูุช ุงุฒ ูุงู ุจู ุตูุฑุช ุฒุฑ ุงุณุช :
</p>

```js
async function feed(parent, args, context, info) {
  const where = args.filter
    ? {
        OR: [
          { description: { contains: args.filter } },
          { url: { contains: args.filter } }
        ]
      }
    : {};

  const links = await context.prisma.link.findMany({
    where,
    skip: args.skip,
    take: args.take,
    orderBy: args.orderBy
  });

  const count = await context.prisma.link.count({ where });

  return {
    id: 'main-feed',
    links,
    count
  };
}

module.exports = {
  feed
};
```
<p dir="rtl" style="position:right;">
ุชุงุจุน feed ฺฉู ุฏุฑ ุจุงูุง ุชุนุฑู ุดุฏูุ ููุงู ุชุงุจุน ุงุณุช ฺฉู ุฏุฑ ฺฉูุฆุฑ FEED_SEARCH_QUERY ุงุฒ ุขู ุงุณุชูุงุฏู ุดุฏู ุงุณุช. ุฏุฑ ุงูุฌุง ูุงุฑุฏ ุฌุฒุฆุงุช ูุฑุจูุท ุจู ุณุฑูุฑ ููุดูู ู ุขูโูุง ุฑุง ุฏุฑ ุจุฎุด ุฏฺฏุฑ ุชูุถุญ ูโุฏูู.<br />
<br />
ุฏุฑ ุจุฎุด search ูุงุฒ ุฏุงุฑู ฺฉู ูุฑฺฏุงู ุฏฺฉููโ OK ูุดุงุฑ ุฏุงุฏู ุดุฏุ ฺฉูุฆุฑ ูุฑุจูุท ุจู ุฌุณุช ู ุฌู ฺฉู ููุงู FEED_SEARCH_QUERY  ุงุณุช ูุฑุณุชุงุฏู ุดูุฏ. ุงูุง ฺูู ุงุฒ ุชุงุจุน useQuery ุงุณุชูุงุฏู ูโฺฉููุ ุงู ุฏุฑุฎูุงุณุช ููุท ุฒูุงู ุงูุฌุงู ูโุดูุฏ ฺฉู ฺฉู component ูุฑุจูุท ุจู ุฌุณุช ู ุฌู ููุฏ ุดูุฏ. ุจุฑุง ุฑูุน ุงู ูุดฺฉู ุงุฒ ุชุงุจุน ุฏฺฏุฑ ุจู ูุงู useLazyQuery ุงุณุชูุงุฏู ูโฺฉูู. ุนููฺฉุฑุฏ ุงู ุชุงุจุน ูุซู useQuery ุงุณุช ุจุง ุงู ุชูุงูุช ฺฉู ูโุชูุงูู ุขู ุฑุง ุฏุณุช ุงุฌุฑุง ฺฉูู. ุจูุงุจุฑุงู ุงุฒ ุขู ุงุณุชูุงุฏู ูโฺฉูู ุชุง ูุฑฺฏุงู ุฏฺฉููโ OK ูุดุงุฑ ุฏุงุฏู ุดุฏุ ุงู ฺฉูุฆุฑ ุงุฌุฑุง ุดูุฏ. ูพุณ ูุงู Search.js ุฑุง ุจู ุตูุฑุช ุฒุฑ ุชุบุฑ ูโุฏูู :
</p>

```js
const Search = () => {
  const [searchFilter, setSearchFilter] = useState('');
  const [executeSearch, { data }] = useLazyQuery(
    FEED_SEARCH_QUERY
  );
  return (
    <>
      <div>
        Search
        <input
          type="text"
          onChange={(e) => setSearchFilter(e.target.value)}
        />
        <button
          onClick={() =>
            executeSearch({
              variables: { filter: searchFilter }
            })
          }
        >
          OK
        </button>
      </div>
      {data &&
        data.feed.links.map((link, index) => (
          <Link key={link.id} link={link} index={index} />
        ))}
    </>
  );
};
```

<p dir="rtl" style="position:right;">
ฺฉ ุฏฺฏุฑ ุงุฒ ุจุฎุดโูุง ุงู ุจุฑูุงููุ realtime ุจูุฏู ุขู ุงุณุช ฺฉู ุงู ูฺฺฏ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ subscriptionโูุง ุฏุฑ GraphQL ูพุงุฏูโุณุงุฒ ูโฺฉูู. ุจุง ุงุณุชูุงุฏู ุงุฒ subscriptionูุง ุจู ููฺฏุงู ุฑุฎ ุฏุงุฏู ฺฉ ุฑูุฏุงุฏ ูุดุฎุตุ ุณุฑูุฑ ุฏุงุฏูโูุง ุฑุง ุจู ุณูุช ฺฉูุงูุช ูโูุฑุณุชุฏ. ููุช ุงุฒ subscription ุงุณุชูุงุฏู ูโฺฉููุ ุณุฑูุฑ ฺฉ ุงุฑุชุจุงุท ุจู ฺฉูุงูุช ุจุฑูุฑุงุฑ ูโฺฉูุฏ ฺฉู ุฏุฑ ููฺฏุงู ุฑุฎ ุฏุงุฏู ุฑูุฏุงุฏ ฺฉู ุงุฒ ูุจู ูุดุฎุต ุดุฏูุ ุฏุงุฏูโูุง ููุฑุฏ ูุงุฒ client ุฑุง ุจุฑุง ุขู ุงุฑุณุงู ูโฺฉูุฏ. ุฏุฑ ูุงูุน subscriptionโูุง ุงุฒ WebSocket ุจุฑุง ุจุฑูุฑุงุฑ ุงุฑุชุจุงุท ุงุณุชูุงุฏู ูฺฉููุฏ.<br />
<br />
ูโุฎูุงูู ุจุจูู ฺฺฏููู ุงุฒ subscription ุฏุฑ apollo client ุงุณุชูุงุฏู ฺฉูู. ุงุจุชุฏุง ุฎุท ุฒุฑ ุฑุง ุฏุฑ ุชุฑููุงู ุงุฌุฑุง ฺฉูุฏ :
</p>

```
yarn add subscriptions-transport-ws
```
<p dir="rtl" style="position:right;">
ุณูพุณ ณ ุฎุท ุฒุฑ ุฑุง ุจู ูุณูุช importโูุง ูุงู index.js ุงุถุงูู ูโฺฉูู.
</p>

```js
import { split } from '@apollo/client';
import { WebSocketLink } from '@apollo/client/link/ws';
import { getMainDefinition } from '@apollo/client/utilities';
```
<p dir="rtl" style="position:right;">
ูุงู index.js ุฑุง ุจู ุตูุฑุช ุฒุฑ ุชุบุฑ ูโุฏูู :
</p>

```js
const wsLink = new WebSocketLink({
  uri: `ws://localhost:4000/graphql`,
  options: {
    reconnect: true,
    connectionParams: {
      authToken: localStorage.getItem(AUTH_TOKEN)
    }
  }
});

const link = split(
  ({ query }) => {
    const { kind, operation } = getMainDefinition(query);
    return (
      kind === 'OperationDefinition' &&
      operation === 'subscription'
    );
  },
  wsLink,
  authLink.concat(httpLink)
);

const client = new ApolloClient({
  link,
  cache: new InMemoryCache()
});
```
<p dir="rtl" style="position:right;">
ุฏุฑ ฺฉุฏ ุจุงูุงุ wsLink ูุดุงูุฏููุฏูโ ฺฉ ุงุฑุชุจุงุท WebSocket ุจุฑุง subscription ูุง ุงุณุช. ููฺูู ุงุฒ ุชุงุจุน split ุจุฑุง ูุณุฑุงุจ ุตุญุญ ุฏุฑุฎูุงุณุชโูุง ู ุจู ุฑูุฒุฑุณุงู ุตุฏุงุฒุฏู ApolloClient ุงุณุชูุงุฏู ูโฺฉูู. ูุจโุณูฺฉุช ฺฉู ูพุงุฏู ูโฺฉููุ ุจู subscription endpoints ุขฺฏุงู ุงุณุช. ุฏุฑ ุงูุฌุง endpoint ูุฑุจูุท ุจู subscription ูุดุงุจู Http endpoint ุงุณุช ุจุง ุงู ุชูุงูุช ฺฉู ุฏุฑ subscription ุงุฒ ูพุฑูุชฺฉู ws (websocket) ุจู ุฌุง http ุงุณุชูุงุฏู ูโุดูุฏ. ููฺูู websocket ุชุนุฑู ุดุฏูุ ุจุง ุงุณุชูุงุฏู ุงุฒ token ูุฑุจูุท ุจู ฺฉุงุฑุจุฑ ฺฉู ุฏุฑ localstorage ุฐุฎุฑู ุดุฏู ุงุญุฑุงุฒ ููุช ูโุดูุฏ.<br />
ุชุงุจุน split ุฏุฑ ุงูุฌุง ุงุณุชูุงุฏู ูโุดูุฏ ุชุง request ุฑุง ุจู ฺฉ middleware link ูุดุฎุต ูุฏุงุช ฺฉูุฏ. ุงู ุชุงุจุน ณ ูุฑูุฏ ูโฺฏุฑุฏ. ุงูู ฺฉ ุชุงุจุน ุงุณุช ู ูุฑูุฏโูุง ุฏูู ู ุณูู ูุฑฺฉุฏุงู ุงุฒ ุฌูุณ ApolloLink ูุณุชูุฏ. ูุฑูุฏ ุงูู ฺฉู ฺฉ ุชุงุจุน ุงุณุชุ ููุฏุงุฑ bool ุจุฑูฺฏุฑุฏุงูุฏ. ุงฺฏุฑ ุงู ููุฏุงุฑ true ุจุงุดุฏุ request ุจู ููฺฉ ูุฑูุฏ ุฏูู ุชุงุจุน split ู ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุจู ููฺฉ ูุฑูุฏ ุณูู ุชุงุจุน split ูุฏุงุช ูโุดูุฏ. <br />
ุฏุฑ ฺฉุฏ index.jsุ ุชุงุจุน ูุฑูุฏ ุงูู split ูุดุงู ู ุฏูุฏ ฺฉู ุขุง ุนููุงุช ุฏุฑุฎูุงุณุช ุดุฏู ุงุฒ ุฌูุณ subscription ูุณุช ุง ุฎุฑ. ุงฺฏุฑ ุจูุฏุ ุขู ุฑุง ุจู ุณูุช wsLink ู ุงฺฏุฑ ูุจูุฏ ุขู ุฑุง ุจู ุณูุช httpLink ูุฏุงุช ูโฺฉูุฏ.<br />
<br />
ุญุงู ูโุฎูุงูู ุงุฒ subscription ุจุฑุง realtime ฺฉุฑุฏู ุจุฑูุงูู ุงุณุชูุงุฏู ฺฉูู.<br />
ุจุฑุง ุงูฺฉู ุจุฎูุงูู ุฏุฑ ููฺฏุงู ุณุงุฎุชู ุดุฏู ููฺฉโูุง ุฌุฏุฏุ ุจุฑูุงูู ุจู ุตูุฑุช realtime ฺฉุงุฑ ฺฉูุฏุ ุจุงุฏ ุฑุฎุฏุงุฏโูุง ุฑุง ฺฉู ุจุฑุง ููฺฉโูุง ุงุชูุงู ูโุงูุชุฏ ุฑุง subscribe ฺฉูู. <br />
ุชุงุจุน useQuery ุจู ูุง ุฏุณุชุฑุณ ุจู ุชุงุจุน ุจู ูุงู subscribeToMore ุฑุง ูโุฏูุฏ. ูโุชูุงูู ุณุงุฎุชุงุฑ ุงู ุชุงุจุน ุฑุง ุฏูุจุงุฑู ู ูุทุงุจู ุขูฺู ูุฎูุงูู ุจููุณู ู ุงุฒ ุขู ุจุฑุง ุงูุฌุงู ฺฉุงุฑ ุฑู ุฏุงุฏูโูุง ุฌุฏุฏ ฺฉู ุท subscription ูโุฑุณุฏ ุงุณุชูุงุฏู ฺฉูู.<br />
ูุงู LinkList.js ุฑุง ุจู ุตูุฑุช ุฒุฑ ุชุบุฑ ูโุฏูู :
</p>

```js
const getQueryVariables = (isNewPage, page) => {
  const skip = isNewPage ? (page - 1) * LINKS_PER_PAGE : 0;
  const take = isNewPage ? LINKS_PER_PAGE : 100;
  const orderBy = { createdAt: 'desc' };
  return { take, skip, orderBy };
};

const LinkList = () => {
  const history = useHistory();
  const isNewPage = history.location.pathname.includes(
    'new'
  );
  const pageIndexParams = history.location.pathname.split(
    '/'
  );
  const page = parseInt(
    pageIndexParams[pageIndexParams.length - 1]
  );

  const pageIndex = page ? (page - 1) * LINKS_PER_PAGE : 0;

  const {
    data,
    loading,
    error,
    subscribeToMore
  } = useQuery(FEED_QUERY, {
    variables: getQueryVariables(isNewPage, page)
  });

  subscribeToMore({
    // ...
  });

  // ...
};
```

<p dir="rtl" style="position:right;">
ุชุงุจุน subscribeToMore ฺฉ object ุจู ุนููุงู ูุฑูุฏ ูโฺฏุฑุฏ ฺฉู ูุงุฒ ุงุณุช ุขู ุฑุง ุจุฑุง ฺฺฏููู ฺฏูุด ุฏุงุฏู ุง ุฌูุงุจ ุฏุงุฏู ุจู subscription ุชูุธู ฺฉูู.<br />
ุงุจุชุฏุง ุจุงุฏ ฺฉ subscription document ู ฺฉูุฏ document ุฏุฑ ุงู object ูพุงุณ ุฏูู. ุงู document ุฏุฑ ูุงูุน ฺฉ GraphQL document ุงุณุช ฺฉู ุฏุฑ ุขู subscription ุฎูุฏ ุฑุง ุชุนุฑู ูโฺฉูู. ููฺูู ูโุชูุงูู ุจู ฺฉ ฺฉูุฏ ุจู ูุงู updateQuery ฺฉ ุชุงุจุน ูพุงุณ ุฏูู ฺฉู ุงุฒ ุขู ุจุฑุง ุจู ุฑูุฒ ุฑุณุงู ฺฉุฑุฏู ุญุงูุธู ุงุณุชูุงุฏู ฺฉูู. <br />
ุชูุธูุงุช ุชูุถุญ ุฏุงุฏูโุดุฏู ุจุฑุง object ูุฑูุฏ ุจู ุชุงุจุน subscribeToMore ุจู ุตูุฑุช ุฒุฑ ูพุงุฏูโุณุงุฒ ูโุดูุฏ :
</p>

```js
subscribeToMore({
  document: NEW_LINKS_SUBSCRIPTION,
  updateQuery: (prev, { subscriptionData }) => {
    if (!subscriptionData.data) return prev;
    const newLink = subscriptionData.data.newLink;
    const exists = prev.feed.links.find(
      ({ id }) => id === newLink.id
    );
    if (exists) return prev;

    return Object.assign({}, prev, {
      feed: {
        links: [newLink, ...prev.feed.links],
        count: prev.feed.links.length + 1,
        __typename: prev.feed.__typename
      }
    });
  }
});
```
<p dir="rtl" style="position:right;">
ูพุณ ุงุฒ ุงู ฺฉุงู ุงุณุช ฺฉ subscription ุจู ูุงู NEW_LINKS_SUBSCRIPTION ุจุง ุงุณุชูุงุฏู ุงุฒ gal ุชุนุฑู ฺฉูู.
</p>

```js
const NEW_LINKS_SUBSCRIPTION = gql`
  subscription {
    newLink {
      id
      url
      description
      createdAt
      postedBy {
        id
        name
      }
      votes {
        id
        user {
          id
        }
      }
    }
  }
`;
```
<p dir="rtl" style="position:right;">
ฺฉุงุฑโูุง ฺฉู ุจุฑุง subscription ุฏุฑ ุจุงูุง ุชูุถุญ ุฏุงุฏูโุดุฏ ุฑุง ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุฑุงโูุง ุฌุฏุฏ ูุฒ ุงูุฌุงู ูโุฏูู.<br />
ูพุณ ุฏุฑ ูุงู LinkList.js ฺฉุฏโ ุฒุฑ ุฑุง ุจู LinkList component ุงุถุงูู ูโฺฉูู.
</p>

```js
subscribeToMore({
  document: NEW_VOTES_SUBSCRIPTION
});
```
<p dir="rtl" style="position:right;">
ููฺูู ููุงููุฏ ูุณูุช ูุจู ฺฉ subscription ุฏฺฏุฑ ุจู ูุงู NEW_VOTES_SUBSCRIPTION ุฏุฑ ุจุงูุง ูุงู LinkList.js ุงุถุงูู ู ฺฉูู.
</p>

```js
const NEW_VOTES_SUBSCRIPTION = gql`
  subscription {
    newVote {
      id
      link {
        id
        url
        description
        createdAt
        postedBy {
          id
          name
        }
        votes {
          id
          user {
            id
          }
        }
      }
      user {
        id
      }
    }
  }
`;
```

<p dir="rtl" style="position:right;">
ุฏุฑ ููุงุช ุจุฑูุงููโ ูุง ุจู ุตูุฑุช realtime ูุงุจู ุงุฌุฑุง ุงุณุช!<br />
<br />
ุจู ุงู ุชุฑุชุจ ุชูุงูุณุชู ุจุง ุงุณุชูุงุฏู ุงุฒ Apollo Client ุจุฑูุงููโุง ูพุงุฏูโุณุงุฒ ฺฉูู ฺฉู ุงุฒ GraphQL ุจุฑุง ุตุฏุง ุฒุฏู apiโูุง ุงุณุชูุงุฏู ฺฉูุฏ ู ฺฉุงุฑุจุฑุฏ ุขู ุฑุง ุฏุฑ ูพุฑูฺูโุง ูุงูุน ูุดุงูุฏู ฺฉูู.
</p>
  


